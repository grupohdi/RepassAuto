<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title size="large">
      Meus Veículos / Cadastro
    </ion-title>
  </ion-toolbar>
</ion-header>


<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="normal">Meus Veículos / Cadastro</ion-title>
    </ion-toolbar>
  </ion-header>


  <div class="goBack">
    <ion-icon (click)="goBack()" color="primary" name="arrow-back-sharp"></ion-icon>
  </div>


  <div id="container">

    <ion-card>
      <ion-card-content>

        <div *ngIf="vehicle.veiculoFotos.length > 0">
        <swiper [config]="config" (slideChange)="onSlideChange($event)">
          <ng-template swiperSlide *ngFor="let foto of vehicle.veiculoFotos">
            <img src="{{ foto.base64 }}" width="200" height="100" />
          </ng-template>
        </swiper>
      </div>
      <div *ngIf="vehicle.veiculoFotos.length == 0">
        <swiper [config]="config" (slideChange)="onSlideChange($event)">
          <ng-template swiperSlide *ngFor="let foto of fotoNaoDisponivel">
            <img src="{{ foto.base64 }}" width="200" height="100" />
          </ng-template>
        </swiper>
      </div>


      <div id="box">
          <div id="leftbox" (click)="tiraFoto()">
            <ion-icon name="camera-outline"></ion-icon>
          </div>
          <div id="rightbox" (click)="apagaFoto()">
            <ion-icon name="remove-circle-outline"></ion-icon>
          </div>
        </div>

        <ion-grid>
          <ion-row>
            <ion-col>
              <ion-label>Tipo:</ion-label>
            </ion-col>
            <ion-col>
              <ion-select  interface="action-sheet"  cancelText="Fechar e voltar" [interfaceOptions]="tipoActionSheetOptions"  [(ngModel)]="vehicle.tipo" (ionChange)="preencheTabelaReferencias()">
                <ion-select-option *ngFor="let tipo of Tipos" [value]="tipo.Value">
                  {{tipo.Label}}
                </ion-select-option>
              </ion-select>
            </ion-col>
          </ion-row>

          <ion-row>
            <ion-col>
              <ion-label>Referência:</ion-label>
            </ion-col>
            <ion-col>
              <ion-select interface="action-sheet" cancelText="Fechar e voltar"  [interfaceOptions]="referenciaActionSheetOptions" [(ngModel)]="vehicle.referencia" (ionChange)="preencheMarcas()">
                <ion-select-option *ngFor="let referencia of Referencias" [value]="referencia.Codigo">
                  {{referencia.Mes}}
                </ion-select-option>
              </ion-select>
            </ion-col>
          </ion-row>

          <ion-row>
            <ion-col>
              <ion-label>Marca:</ion-label>
            </ion-col>
            <ion-col>
              <ion-select interface="action-sheet" cancelText="Fechar e voltar" [interfaceOptions]="marcaActionSheetOptions" [(ngModel)]="vehicle.marca" (ionChange)="preencheModelos()">
                <ion-select-option *ngFor="let marca of Marcas" [value]="marca.Value">
                  {{marca.Label}}
                </ion-select-option>
              </ion-select>
            </ion-col>
          </ion-row>

          <ion-row>
            <ion-col>
              <ion-label>Modelo:</ion-label>
            </ion-col>
            <ion-col>
              <ion-select interface="action-sheet" cancelText="Fechar e voltar" [interfaceOptions]="modeloActionSheetOptions" [(ngModel)]="vehicle.modelo" (ionChange)="preencheAnoModelo()">
                <ion-select-option *ngFor="let modelo of Modelos" [value]="modelo.Value">
                  {{modelo.Label}}
                </ion-select-option>
              </ion-select>
            </ion-col>
          </ion-row>

          <ion-row>
            <ion-col>
              <ion-label>Ano Modelo:</ion-label>
            </ion-col>
            <ion-col>
              <ion-select interface="action-sheet" cancelText="Fechar e voltar" [interfaceOptions]="anoModeloActionSheetOptions" [(ngModel)]="vehicle.anoModelo" (ionChange)="preencheCardFipe()">
                <ion-select-option *ngFor="let anoModelo of AnoModelos" [value]="anoModelo.Value">
                  {{anoModelo.Label}}
                </ion-select-option>
              </ion-select>
            </ion-col>
          </ion-row>

          <ion-row>
            <ion-col>
              <ion-label>Ano Fabr.:</ion-label>
            </ion-col>
            <ion-col>
              <ion-input type="text" [(ngModel)]="vehicle.anoFabricacao" [value]="vehicle.anoFabricacao"></ion-input>
            </ion-col>
          </ion-row>


          <ion-row aria-colspan="2">
            <ion-col>
              <ion-card class="cardFipe">
                <ion-card-content>
                    Fipe: <b>{{ vehicle.codigoFipe}}</b><br>
                    Preço Médio: <b>{{ vehicle.valorFipe}}</b>
                </ion-card-content>
              </ion-card>

            </ion-col>
          </ion-row>

          <ion-row>
            <ion-col>
              <ion-label>Preço Venda:</ion-label>
            </ion-col>
            <ion-col>
              <ion-input type="text" [(ngModel)]="vehicle.preco" [value]="vehicle.preco"></ion-input>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col>
              <ion-label>Placa:</ion-label>
            </ion-col>
            <ion-col>
              <ion-input type="text" [(ngModel)]="vehicle.placa" [value]="vehicle.placa"></ion-input>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col>
              <ion-label>KMs:</ion-label>
            </ion-col>
            <ion-col>
              <ion-input type="text" [(ngModel)]="vehicle.kms" [value]="vehicle.kms"></ion-input>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col>
              <ion-label>Cor:</ion-label>
            </ion-col>
            <ion-col>
              <ion-input type="text" [(ngModel)]="vehicle.cor" [value]="vehicle.cor"></ion-input>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col>
              <ion-label>Chassi:</ion-label>
            </ion-col>
            <ion-col>
              <ion-input type="text" [(ngModel)]="vehicle.chassi" [value]="vehicle.chassi"></ion-input>
            </ion-col>
          </ion-row>
          <ion-row aria-colspan="2">
            <ion-col>
              <ion-label>Descrição:</ion-label>
            </ion-col>
          </ion-row>
          <ion-row aria-colspan="2">
            <ion-col>
              <ion-textarea rows="8" [(ngModel)]="vehicle.descricao" [value]="vehicle.descricao"></ion-textarea>
            </ion-col>
          </ion-row>
          <ion-row aria-colspan="2">
            <ion-col >
              <ion-item-divider></ion-item-divider>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col>
              <ion-label>Latitude:</ion-label>
            </ion-col>
            <ion-col>
              <ion-input type="text" [(ngModel)]="vehicle.latitude" [value]="vehicle.latitude"></ion-input>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col>
              <ion-label>Longitude:</ion-label>
            </ion-col>
            <ion-col>
              <ion-input type="text" [(ngModel)]="vehicle.longitude" [value]="vehicle.longitude"></ion-input>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col>
              <ion-label>Logradouro:</ion-label>
            </ion-col>
            <ion-col>
              <ion-input type="text" [(ngModel)]="vehicle.logradouro" [value]="vehicle.logradouro"></ion-input>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col>
              <ion-label>Número:</ion-label>
            </ion-col>
            <ion-col>
              <ion-input type="text" [(ngModel)]="vehicle.numero" [value]="vehicle.numero"></ion-input>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col>
              <ion-label>Compl.:</ion-label>
            </ion-col>
            <ion-col>
              <ion-input type="text" [(ngModel)]="vehicle.complemento" [value]="vehicle.complemento"></ion-input>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col>
              <ion-label>CEP:</ion-label>
            </ion-col>
            <ion-col>
              <ion-input type="text" [(ngModel)]="vehicle.cep" [value]="vehicle.cep"></ion-input>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col>
              <ion-label>Cidade:</ion-label>
            </ion-col>
            <ion-col>
              <ion-input type="text" [(ngModel)]="vehicle.cidade" [value]="vehicle.cidade"></ion-input>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col>
              <ion-label>UF:</ion-label>
            </ion-col>
            <ion-col>
              <ion-input type="text" [(ngModel)]="vehicle.uf" [value]="vehicle.uf"></ion-input>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col>
              <ion-label>País:</ion-label>
            </ion-col>
            <ion-col>
              <ion-input type="text" [(ngModel)]="vehicle.pais" [value]="vehicle.pais"></ion-input>
            </ion-col>
          </ion-row>
          <ion-row aria-colspan="2">
            <ion-col >
              <ion-item-divider></ion-item-divider>
            </ion-col>
          </ion-row>
          <ion-row aria-colspan="2">
            <ion-col>
              <ion-button center middle color="success" (click)="salvar()">Salvar</ion-button>
            </ion-col>
          </ion-row>
        </ion-grid>

      </ion-card-content>

    </ion-card>

  </div>

  <div class="goBack">
    <ion-icon (click)="goBack()" color="primary" name="arrow-back-sharp"></ion-icon>
  </div>

</ion-content>